/*
  Shiki syntax highlighting tuned to Gruvbox Material palette (see add/theme.css).
  Colors stick to Obsidian theme variants and adapt to light/dark automatically.
*/

:root {
  --code-surface: #f7edd2; /* close to light0 */
  --code-foreground: #3c3836; /* dark1 */
  --code-border: rgba(60, 56, 54, 0.18);
  --code-comment: #a89984; /* light4 */
  --code-punctuation: #3c3836;
  --code-literal: #e78a4e; /* neutral yellow */
  --code-string: #89b482;  /* neutral aqua */
  --code-keyword: #ea6962; /* neutral red */
  --code-function: #7daea3; /* neutral blue */
  --code-type: #d3869b;    /* neutral purple */
  --code-constant: #a9b665; /* neutral green */
  --code-highlight: rgba(233, 196, 106, 0.24);
}

html.dark {
  --code-surface: #282828; /* dark0 */
  --code-foreground: #ebdbb2; /* light1 */
  --code-border: rgba(235, 219, 178, 0.32);
  --code-comment: #bdae93;
  --code-punctuation: #f4e7d0;
  --code-literal: #fe8019;
  --code-string: #b8bb26;
  --code-keyword: #fabd2f;
  --code-function: #8ec07c;
  --code-type: #d3869b;
  --code-constant: #83a598;
  --code-highlight: rgba(214, 189, 148, 0.32);
}

.astro-code {
  position: relative;
  overflow-x: auto;
  padding: 1rem 1.25rem;
  border-radius: 0.9rem;
  background: var(--code-surface) !important;
  color: var(--code-foreground) !important;
  border: 1px solid var(--code-border);
  box-shadow: inset 0 0 0 1px rgba(12, 12, 12, 0.02);
  transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

.astro-code code {
  display: block;
  white-space: pre;
  overflow-wrap: normal;
  word-break: normal;
}

.astro-code .line {
  display: block;
  padding-inline: 0.25rem;
}

.astro-code .line.highlighted {
  background: var(--code-highlight);
  margin-inline: -0.35rem;
  border-radius: 0.6rem;
}

/* Token colors */
.astro-code .token.comment,
.astro-code .token.prolog,
.astro-code .token.doctype,
.astro-code .token.cdata {
  color: var(--code-comment) !important;
  font-style: italic;
}

.astro-code .token.punctuation {
  color: var(--code-punctuation) !important;
}

.astro-code .token.number,
.astro-code .token.boolean,
.astro-code .token.constant,
.astro-code .token.symbol,
.astro-code .token.tag,
.astro-code .token.property {
  color: var(--code-literal) !important;
}

.astro-code .token.selector,
.astro-code .token.attr-name,
.astro-code .token.string,
.astro-code .token.char,
.astro-code .token.builtin,
.astro-code .token.inserted {
  color: var(--code-string) !important;
}

.astro-code .token.keyword,
.astro-code .token.control,
.astro-code .token.operator,
.astro-code .token.atrule,
.astro-code .token.attr-value {
  color: var(--code-keyword) !important;
}

.astro-code .token.function,
.astro-code .token.class-name,
.astro-code .token.method {
  color: var(--code-function) !important;
}

.astro-code .token.regex,
.astro-code .token.important,
.astro-code .token.variable,
.astro-code .token.parameter {
  color: var(--code-constant) !important;
}

.astro-code .token.deleted {
  color: var(--code-keyword) !important;
  text-decoration: line-through;
}

.astro-code .token.bold {
  font-weight: 700;
}

.astro-code .token.italic {
  font-style: italic;
}

/* Toolbar/Copy button compatibility if added later */
.astro-code [data-rehype-pretty-code-title] {
  display: block;
  margin-bottom: 0.5rem;
  font-size: 0.85rem;
  font-family: var(--font-ui);
  color: var(--code-comment);
}
