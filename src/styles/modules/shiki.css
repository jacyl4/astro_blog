/*
  Shiki syntax highlighting tuned to Gruvbox Material palette (see add/theme.css).
  Colors stick to Obsidian theme variants and adapt to light/dark automatically.
*/

/* Gruvbox Material reference colors */
:root {
  --light-bg: #fbf1c7;
  --light-bg-soft: #f2e5bc;
  --light-border: #d5c4a1;
  --light-foreground: #3c3836;
  --light-comment: #928374;
  --light-red: #9d0006;
  --light-orange: #af3a03;
  --light-yellow: #b57614;
  --light-green: #6c782e;
  --light-blue: #076678;
  --light-purple: #8f3f71;
  --light-aqua: #689d6a;

  --dark-bg-hard: #1d2021;
  --dark-bg: #282828;
  --dark-bg-soft: #32302f;
  --dark-border: #504945;
  --dark-foreground: #f4e7d0;
  --dark-comment: #d5c4a1;
  --dark-red: #fb4934;
  --dark-orange: #fe8019;
  --dark-yellow: #fabd2f;
  --dark-green: #b8bb26;
  --dark-blue: #83a598;
  --dark-purple: #d3869b;
  --dark-aqua: #8ec07c;
}

:root {
  --code-surface: var(--light-bg);
  --code-foreground: var(--light-foreground);
  --code-border: rgba(60, 56, 54, 0.18);
  --code-comment: var(--light-comment);
  --code-punctuation: var(--light-foreground);
  --code-literal: var(--light-yellow);
  --code-string: var(--light-aqua);
  --code-keyword: var(--light-red);
  --code-function: var(--light-blue);
  --code-type: var(--light-purple);
  --code-constant: var(--light-orange);
  --code-highlight: rgba(217, 136, 37, 0.18);
}

html.dark {
  --code-surface: var(--dark-bg);
  --code-foreground: #f4e7d0;
  --code-border: rgba(244, 231, 208, 0.36);
  --code-comment: #bdae93;
  --code-punctuation: #f4e7d0;
  --code-literal: #f2c97d;
  --code-string: #c1de72;
  --code-keyword: #f36c6c;
  --code-function: #90c7c7;
  --code-type: #d79acb;
  --code-constant: #eea76a;
  --code-highlight: rgba(244, 231, 208, 0.22);
}

html.dark .astro-code code {
  filter: brightness(1.5);
}

.astro-code {
  position: relative;
  overflow-x: auto;
  padding: 1rem 1.25rem;
  border-radius: 0.9rem;
  background: var(--code-surface) !important;
  color: var(--code-foreground) !important;
  border: 1px solid var(--code-border);
  box-shadow: inset 0 0 0 1px rgba(12, 12, 12, 0.02);
  transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  line-height: 0.65;
}

.astro-code code {
  display: block;
  white-space: pre;
  overflow-wrap: normal;
  word-break: normal;
  line-height: inherit;
}

.astro-code .line {
  display: block;
  padding-inline: 0.25rem;
  line-height: inherit;
}

.astro-code .line.highlighted {
  background: var(--code-highlight);
  margin-inline: -0.35rem;
  border-radius: 0.6rem;
}

/* Token colors */
.astro-code .token.comment,
.astro-code .token.prolog,
.astro-code .token.doctype,
.astro-code .token.cdata {
  color: var(--code-comment) !important;
  font-style: italic;
}

.astro-code .token.punctuation {
  color: var(--code-punctuation) !important;
}

.astro-code .token.number,
.astro-code .token.boolean,
.astro-code .token.constant,
.astro-code .token.symbol,
.astro-code .token.tag,
.astro-code .token.property {
  color: var(--code-literal) !important;
}

.astro-code .token.selector,
.astro-code .token.attr-name,
.astro-code .token.string,
.astro-code .token.char,
.astro-code .token.builtin,
.astro-code .token.inserted {
  color: var(--code-string) !important;
}

.astro-code .token.keyword,
.astro-code .token.control,
.astro-code .token.operator,
.astro-code .token.atrule,
.astro-code .token.attr-value {
  color: var(--code-keyword) !important;
}

.astro-code .token.function,
.astro-code .token.class-name,
.astro-code .token.method {
  color: var(--code-function) !important;
}

.astro-code .token.regex,
.astro-code .token.important,
.astro-code .token.variable,
.astro-code .token.parameter {
  color: var(--code-constant) !important;
}

.astro-code .token.deleted {
  color: var(--code-keyword) !important;
  text-decoration: line-through;
}

.astro-code .token.bold {
  font-weight: 700;
}

.astro-code .token.italic {
  font-style: italic;
}

/* Toolbar/Copy button compatibility if added later */
.astro-code [data-rehype-pretty-code-title] {
  display: block;
  margin-bottom: 0.5rem;
  font-size: 0.85rem;
  font-family: var(--font-ui);
  color: var(--code-comment);
}
